<!DOCTYPE html>
<html lang="en" data-color-scheme="light">
  <head>
    <meta charset="UTF-8" />
    <title>forms</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./theme.css" />
    <style>
      main.container {
        position: relative;
      }
      .copy-button {
        position: absolute;
        right: 0;
        z-index: 1;
      }

      pre {
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <script>
  const saved = sessionStorage.getItem('color-scheme');
  if (saved) {
    document.documentElement.setAttribute('data-color-scheme', saved);
  }
</script>

<main class="container">
  <header
    style="
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      padding: var(--padding);
      gap: var(--padding);
    ">
    <nav class="flex" style="align-items: center">
      <strong>@sparkstone/css</strong>
    </nav>
      <nav class="flex" style="flex-wrap: wrap">
      <a id="theme-toggle"  aria-label="Toggle Theme" title="Toggle Theme">🌙</a>
        <a href="./index.html">Home</a>
        <a href="./colors.html">Colors</a>
        <a href="./forms.html">Forms</a>
        <a href="./containers.html">Containers</a>
      </nav>
  </header>
</main>

<script>
  const toggleBtn = document.getElementById('theme-toggle');
  const root = document.documentElement;

  const updateIcon = () => {
    const scheme = root.getAttribute('data-color-scheme') || 'light';
    toggleBtn.textContent = scheme === 'dark' ? '🌙 Dark' : '☀️ light';
  };

  toggleBtn.addEventListener('click', () => {
    const current = root.getAttribute('data-color-scheme') || 'light';
    const next = current === 'dark' ? 'light' : 'dark';
    root.setAttribute('data-color-scheme', next);
    sessionStorage.setItem('color-scheme', next);
    updateIcon();
  });

  updateIcon();
</script>

    <main class="container">
<h1>Forms</h1>
<p>
  This page demonstrates how <code>@sparkstone/css</code> styles common form elements and includes
  example code for each.
</p>

<nav>
  <ul>
    <li><a href="#basic-form">Basic Form</a></li>
    <li><a href="#validation">Validation</a></li>
    <li><a href="#buttons">Button Styles</a></li>
    <li><a href="#kitchen-sink">Kitchen Sink</a></li>
  </ul>
</nav>

<hr />

<section id="basic-form">
  <h2>Basic Form</h2>
  <form>
    <label>Name <input type="text" placeholder="Jane Doe" /></label>
    <label>Email <input type="email" placeholder="jane@example.com" /></label>
    <label>Bio <textarea placeholder="Tell us about yourself"></textarea></label>
    <label><p>Birth date</p><input type='date' /></label>
    <label>
      Role
      <select>
        <option value="">Select a role</option>
        <option>Developer</option>
        <option>Designer</option>
        <option>Project Manager</option>
      </select>
    </label>
    <label><input type="checkbox" /> Subscribe to updates</label>
    <button type="submit">Submit</button>
  </form>

  <button class="ghost copy-button" data-target="code-basic-form">Copy Code</button>
  <pre><code id="code-basic-form" class="language-html">
&lt;form&gt;
  &lt;label&gt;Name &lt;input type="text" placeholder="Jane Doe"&gt;&lt;/label&gt;
  &lt;label&gt;Email &lt;input type="email" placeholder="jane@example.com"&gt;&lt;/label&gt;
  &lt;label&gt;Bio &lt;textarea&gt;&lt;/textarea&gt;&lt;/label&gt;
  &lt;label&gt;
    Role
    &lt;select&gt;
      &lt;option&gt;Developer&lt;/option&gt;
    &lt;/select&gt;
  &lt;/label&gt;
  &lt;label&gt;&lt;input type="checkbox"&gt; Subscribe&lt;/label&gt;
  &lt;button&gt;Submit&lt;/button&gt;
&lt;/form&gt;
</code></pre>
</section>

<section id="validation">
  <h2>Validation States</h2>
  <form>
    <label>
      Username
      <input type="text" value="taken_username" aria-invalid="true" />
      <small class="error">This username is already taken</small>
    </label>
    <label>
      Password
      <input type="password" aria-invalid="true" />
      <small class="error">Password must be at least 8 characters</small>
    </label>
    <button class="error">Submit with Errors</button>
  </form>

  <button class="ghost copy-button" data-target="code-validation">Copy Code</button>
  <pre><code id="code-validation" class="language-html">
&lt;form&gt;
  &lt;label&gt;
    Username
    &lt;input type="text" aria-invalid="true"&gt;
    &lt;small class="error"&gt;This username is already taken&lt;/small&gt;
  &lt;/label&gt;
  &lt;label&gt;
    Password
    &lt;input type="password" aria-invalid="true"&gt;
    &lt;small class="error"&gt;Password must be at least 8 characters&lt;/small&gt;
  &lt;/label&gt;
  &lt;button class="error"&gt;Submit&lt;/button&gt;
&lt;/form&gt;
</code></pre>
</section>

<section id="buttons">
  <h2>Button Styles</h2>
  <p>Use semantic classes to change button appearance:</p>
  <button>Default</button>
  <button class="secondary">Secondary</button>
  <button class="contrast">Contrast</button>
  <button class="ghost">Ghost</button>

  <button class="ghost copy-button" data-target="code-buttons">Copy Code</button>
  <pre><code id="code-buttons" class="language-html">
&lt;button&gt;Default&lt;/button&gt;
&lt;button class="secondary"&gt;Secondary&lt;/button&gt;
&lt;button class="contrast"&gt;Contrast&lt;/button&gt;
&lt;button class="ghost"&gt;Ghost&lt;/button&gt;
</code></pre>
</section>

<section id="kitchen-sink">
  <h2>Kitchen Sink Form</h2>
  <p>A full form combining all the above elements into a realistic layout.</p>

  <form>
    <fieldset>
      <legend>Contact Info</legend>
      <label>Name <input type="text" /></label>
      <label>Email <input type="email" /></label>
      <label>Phone <input type="tel" /></label>
    </fieldset>

    <fieldset>
      <legend>Preferences</legend>
      <label>
        Favorite Language
        <select>
          <option>JavaScript</option>
          <option>TypeScript</option>
          <option>CSS</option>
        </select>
      </label>
      <label>
        <input type="checkbox" />
        I want to receive updates
      </label>
      <label>
        <input type="radio" name="plan" checked />
        Free Plan
      </label>
      <label>
        <input type="radio" name="plan" />
        Pro Plan
      </label>
    </fieldset>

    <label>
      Message
      <textarea></textarea>
    </label>

    <button class="primary">Submit</button>
  </form>
</section>
</main>
  </body>
</html>
<script type="module">
  document.querySelectorAll('.copy-button').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.getAttribute('data-target');
      const code = document.getElementById(id).innerText;
      navigator.clipboard.writeText(code).then(() => {
        btn.textContent = 'Copied!';
        setTimeout(() => (btn.textContent = 'Copy Code'), 1000);
      });
    });
  });
</script>
<script type="module">
  const pickerConfigs = [
    {
      var: '--color',
      id: 'base-color-picker',
      storage: 'sparkstone-base-color',
      fallback: 'rebeccapurple',
    },
    {
      var: '--accent-color',
      id: 'accent-color-picker',
      storage: 'sparkstone-accent-color',
      fallback: '#425e00',
    },
    {
      var: '--error-color',
      id: 'error-color-picker',
      storage: 'sparkstone-error-color',
      fallback: 'maroon',
    },
  ];

  function getCSSVar(name) {
    return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
  }

  function toHex(colorString, fallback) {
    try {
      const ctx = document.createElement('canvas').getContext('2d');
      ctx.fillStyle = colorString;
      return ctx.fillStyle;
    } catch {
      return fallback;
    }
  }

  for (const { var: cssVar, id, storage, fallback } of pickerConfigs) {
    const input = document.getElementById(id);

    const stored = sessionStorage.getItem(storage);
    const initial = stored || toHex(getCSSVar(cssVar), fallback);

    document.documentElement.style.setProperty(cssVar, initial);

    if (!input) continue;
    input.value = initial;

    input.addEventListener('input', () => {
      const newValue = input.value;
      document.documentElement.style.setProperty(cssVar, newValue);
      sessionStorage.setItem(storage, newValue);
    });
  }
</script>
